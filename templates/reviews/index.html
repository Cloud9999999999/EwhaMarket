<!-- 리뷰 전체 조회 -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ewha Market | 전체 리뷰조회</title>

  <link rel="stylesheet" href="{{ url_for('static', filename='styles/global.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='styles/review.index.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='styles/auth.css') }}">
</head>

<body>
<header>
  <div class="logo">
    <img src="{{ url_for('static', filename='image/Market-logo.png') }}" alt="Ewha Market">
  </div>
  <nav>
    <ul class="nav-menu">
      <li><a href="{{ url_for('home') }}">상품 조회</a></li>
      <li><a href="{{ url_for('reviews_index') }}" class="active">리뷰 조회</a></li>
      <li><a href="{{ url_for('reviews_write') }}">리뷰 등록</a></li>
      <li><a href="{{ url_for('products_enroll') }}">상품 등록</a></li>
      {% if session['id'] %}
      <li><a href="{{ url_for('mypage_index') }}"><b>{{ session['id'] }}님 반갑습니다!</b></a></li>
      <li><a href="/logout"> 로그아웃 </a></li>
      {% else %}
      <li><a href="{{ url_for('login') }}">회원가입/로그인</a></li>
      {% endif %}
    </ul>
  </nav>
</header>

<main class="review-container">
  <div class="page">
    <section id="review">
      <h2 class="title">전체 리뷰조회</h2>
      <button class="review-count">전체 리뷰 : {{ reviews|length }}</button>

      <!-- ★ 리뷰 카드 리스트 -->
      <div class="card-container">

        {% if reviews %}
          {% for rid, r in reviews %}
          <div class="review-card">
            <a href="{{ url_for('review_detail', review_id=rid) }}" style="all: unset; cursor: pointer;">
              
              <div class="review-title">{{ r.title }}</div>

              <div class="border-container">
                <img 
                  src="{{ r.images[0] if r.images else '/static/image/default.png' }}"
                  alt="review image"
                />

                <div class="stars">
                  {% for i in range(1, 6) %}
                    {% if r.rating >= i %}
                      ★
                    {% else %}
                      ☆
                    {% endif %}
                  {% endfor %}
                </div>
              </div>
            </a>
          </div>
          {% endfor %}
        {% else %}
          <p>등록된 리뷰가 없습니다.</p>
        {% endif %}

      </div>
    </section>
  </div>
</main>

<footer>@cloud9</footer>
</body>
</html>
