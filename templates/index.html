<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ewha Market</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='styles/index.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='styles/global.css') }}"
    />
  </head>

  <body>
    <header>
      <div class="logo">
        <img
          src="{{ url_for('static', filename='image/Market-logo.png') }}"
          alt="Ewha Market"
        />
      </div>
      <nav>
        <ul class="nav-menu">
          <li><a href="{{ url_for('home') }}">상품 조회</a></li>
          <li><a href="{{ url_for('reviews_index') }}">리뷰 조회</a></li>
          <li><a href="{{ url_for('reviews_write') }}">리뷰 등록</a></li>
          <li><a href="{{ url_for('products_enroll') }}">상품 등록</a></li>
          {% if session['id'] %}
          <li>
            <a href="{{ url_for('mypage_index') }}"
              ><b>{{ session['id'] }}님 반갑습니다!</b></a
            >
          </li>
          <li>
            <a href="/logout"> 로그아웃 </a>
          </li>
          {% else %}
          <li>
            <a href="{{ url_for('login') }}">회원가입/로그인</a>
          </li>
          {% endif %}
        </ul>
      </nav>
    </header>

    <main class="container">
      <div class="page">
        <section id="product">
          <div class="list-header">
            <h2 class="section-title">전체 상품조회 (총 {{ total }}개)</h2>

            <div class="filter-bar">
              <button class="filter">저가순</button>
              <button class="filter">고가순</button>
              <button class="filter">인기순</button>
              <button class="filter">신상품순</button>
            </div>
          </div>

          <div class="product-list">
            {% if total > 0 %}
                {% for key, value in datas %}
                <div class="product-card" onclick="location.href='{{ url_for('products_detail', name=key) }}';" style="cursor:pointer;">
                    <div class="image-box">
                        <img src="{{ url_for('static', filename='image/' + value.img_path) }}" alt="{{ key }}">
                    </div>
                    <div class="text-info">
                        <h3>{{ key }}</h3>
                        <p>₩{{ value.price }}</p>
                        <p style="font-size:0.8rem; color:gray;">{{ value.status }}</p>
                    </div>
                </div>
                {% endfor %}

            {% else %}
                <p>등록된 상품이 없습니다.</p>
            {% endif %}
          </div>
        </section>

        <div class="page-wrap">
            <div class="page-nation">
                <ul>
                    {% for i in range(page_count) %}
                    <li>
                        <a href="{{ url_for('home', page=i) }}" 
                          style="{{ 'background-color: #00462a; color: #fff;' if i == page else '' }}">
                          {{ i + 1 }}
                        </a>
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
      </div>
    </main>

    <footer><p>@cloud9</p></footer>

    <script>
      const filterButtons = document.querySelectorAll(".filter");

      filterButtons.forEach((button) => {
        button.addEventListener("click", function () {
          filterButtons.forEach((btn) => btn.classList.remove("active"));
          this.classList.add("active");
        });
      });
    </script>
  </body>
</html>
